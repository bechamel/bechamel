<link rel="import" type="html" href="../../../../vendor/polymer/polymer.html">

<dom-module id="br-selectbox">
<link rel="import" type="css" href="../dist/br-selectbox.css">

<template>
  <div class="drop drop__down">
    <button class="drop-button" on-click='_toggleSelect'>
      <span class="drop-button-label">Selecione</span>
      <i class="drop-button-icon fa fa-caret-down"></i>
    </button>
    <div class="drop-content" id="wrap-content">

      <input type="text" on-keyup='_onKeyPress' placeholder="Digite sua busca">

      <ul class="drop-content-list">
        <template is="dom-repeat" items="{{options}}" >
          <li>{{item.name}}</li>
        </template>
      </ul>
    </div>
  </div>    
</template>

<script>
  Polymer({
    is: 'br-selectbox',
    properties: {

      originalOptions: {
        type: Array,
        readyOnly: true
      },
      options: {
        type: Array,
        value: []
      }
    },

    /* -- Lifecycle ------------------------------------------------- */

    ready: function(){
      this._setOriginalOptions(this.options);
    },

    /* -- Private Methods ------------------------------------------- */


    _setOriginalOptions: function(options){
      this.originalOptions = options;
    },

    _toggleSelect: function(){
      document.getElementById('wrap-content').classList.toggle('open')
    },

    _onKeyPress: function(e) {     

      if(e.keyCode >= 65 && e.keyCode <= 90)
      {
        var teste = this.options.filter(function(value, index, array){          
          return array[index].name.indexOf(e.target.value) !== -1;
        });
        this.options = teste;        
      }

      if(!e.target.value.trim()){
       // console.log(originalOptions);
       this.options = this.originalOptions;
     }
   }

   /* -- Public Methods -------------------------------------------- */


 });

</script>
</dom-module>